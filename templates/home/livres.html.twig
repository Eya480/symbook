{% extends 'base.html.twig' %}

{% block title %}Librairie Symbook | Le futur de la lecture
{% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ asset('css/livres.css') }}">

</style>{% endblock %}{% block nav %}
<header class="glass-card">
	<nav class="navbar">
		<a href="{{ path('home') }}" class="logo">Symbook</a>
		<div class="nav-links">
			<a href="{{ path('home') }}">Accueil</a>
			<a href="{{ path('home_livre') }}">Livres</a>
			<a href="#">Contact</a>
		</div>
		<div class="nav-actions">
			<div class="search-icon">
				<i class="fas fa-search"></i>
			</div>
			<div class="cart-icon">
				<i class="fas fa-shopping-bag"></i>
			</div>
			<div class="hamburger">
				<i class="fas fa-bars"></i>
			</div>
		</div>
	</nav>
</header>{% endblock %}{% block body %}
<div class="main-container">
	<div class="page-header">
		<h1 class="page-title">Tous Nos Livres</h1>
		<p class="page-subtitle">Découvrez notre collection complète</p>
	</div>

	<div class="all-books-grid">
		{% for livre in livres %}
			<div class="book-card">
				<div class="book-inner">
					<div class="book-cover">
						<div class="book-cover-img-container">
							<img src="{{ asset('uploads/images/' ~ livre.image) }}" alt="{{ livre.titre }}" loading="lazy">
						</div>
						<div class="book-info">
							<h3 class="book-title">{{ livre.titre|slice(0, 20) }}
								{% if livre.titre|length > 20 %}...
								{% endif %}
							</h3>
							<p class="book-author">{{ livre.editeur|slice(0, 20) }}</p>
							<div class="book-price">
								<span class="price">{{ livre.prix }}€</span>
								<button class="add-to-cart" data-id="{{ livre.id }}">+</button>
							</div>
						</div>
					</div>
					<div class="book-back">
						<p class="book-description">{{ livre.resume|slice(0, 120) }}...</p>
						<div class="book-details">
							<span class="detail-item">
								<i class="fas fa-tag"></i>
								{{ livre.categorie.libelle }}</span>
							<span class="detail-item">
								<i class="far fa-calendar"></i>
								{{ livre.dateEdition|date('Y') }}</span>
						</div>
					</div>
				</div>
			</div>
		{% endfor %}
	</div>


	<script>
		// Animation simplifiée
document.querySelectorAll('.book-card').forEach((card, i) => {
card.style.animationDelay = `${
i * 0.1
}s`;
card.style.opacity = 0;
setTimeout(() => card.style.opacity = 1, i * 100);
});

// Ajout au panier optimisé
document.querySelectorAll('.add-to-cart').forEach(btn => {
btn.addEventListener('click', async function () {
const bookId = this.dataset.id;
try {
const response = await fetch (`/cart/add/${bookId}`);
if (response.ok) {
this.innerHTML = '<i class="fas fa-check"></i>';
setTimeout(() => this.textContent = '+', 1500);
}
} catch (e) {
console.error(e);
}
});
});
	</script>
{% endblock %}
